# pbl-learning-platform
A course project for Advanced Web Technologies at FDU. 

*希望大嘎顺手学一下Markdown，基础使用超简单*

*可用资源包括但不限于[菜鸟教程](https://www.runoob.com/markdown/md-tutorial.html)*

***推荐可以使用[Typora](https://typora.io/)进行编写，工具干净好用跨平台***

## 实体类及其（可能存在的）继承关系
学生
教师
课程
项目
任务
管理员


## 数据库设计
- student (<u>s_id</u>, s_name, gender, major, password)  

  > major或许不需要
  >
  > 需要加入学号、头像
  >
  > 学号是s_id，头像可以有(李)
  >
  > 可以有个人简介什么的，看起来更加有人情味一点
  >
  > 赞同添加(李)

- teacher (<u>t_id</u>, t_name, gender, password)

  > 需要加入工号、头像
  >
  > 工号就是t_id，头像可以有(李)
  >
  > 可以有个人简介什么的，看起来更加有人情味一点
  >
  > 赞同添加(李)

- admin (<u>admin_id</u>, a_name, password)  

  > 是否考虑字段和student以及teacher对齐？然后是否考虑三表合并？毕竟用户信息上没有本质区别，可以加一个身份字段用以区分
  >
  > 管理员比较特别吧，他只要能管理就行了，也许不需要那么多信息？(李) 
  >
  > 三表合并的话，一些关系表(如teach、take)可能比较特别？

- course (<u>c_id</u>, c_name, point, class_time)  

  > 需要加一个状态，未发布，已发布，已删除
  >
  > 可以加，但我觉得可能要先确认一下课程是不是有这些状态，因为文档中没有明确说明(李)
  >
  > 不如再加个简介？展示的时候有些内容，比较好看
  >
  > 赞同添加(李)

- project (<u>p_id</u>, p_name)  

  > 这个也搞个简介？
  >
  > 赞同添加(李)

- assignment (<u>a_id</u>, a_name, a_description, importance, a_start_date, a_end_date, a_point, a_status)  

  > 任务需要一个（甚至多个）负责人，组长可以分配任务给某个同学，或者多个，我觉得个数可以假定

- teach (t_id, c_id)  

  > 如果可以假定一门课只能一个老师上，这样的话t_id可以合并进course表，此表可以省略
  >
  > 不过如果多个老师合作上的话，此表必须独立
  >
  > 个人想法是这个可以比较灵活？甚至能算我们的进阶功能：多教师合作开课？(李)

- take (<u>s_id</u>, <u>c_id</u>)  

- course_project (c_id, p_id)  

  > 这个我觉得可以省掉，project一定只属于一个course，可以合并进project表
  >
  > 赞同(李)

- student_project (<u>s_id</u>, <u>p_id</u>, group_id, group_leader)  

  > 这个可以改为s_id, p_id, is_group_leader，因为默认选择同一个项目的就是一个组，这样比较简单hhh，然后is_group_leader表示是否为leader，还是只是组员
  >
  > 赞同(李)

- project_assignement (p_id, a_id)  

  > 这个我觉得可以省掉，因为assignment一定只属于一个project
  >
  > 要不把p_id合并到assignment表里面吧(李)
  
- 讨论版数据（每个project有一个讨论版，讨论版可以有好多帖子，每个帖子包含发帖人、主题、内容、时间戳；每个帖子有好多回复，每个回复有回复人、时间戳）

  > 按照老师的截图，是不是没有主题？我们能不能把回复和发帖合并在一个表(例如增加一个bool属性为reply，以及reply_d_id)？老师和学生的id是否合并在一起会对这个表格产生影响，或者我们将id设计为S/T/A+学号/工号/管理员编号，这样就能直接分辨是谁发的帖子(李)

- 文件空间数据（每个project有一个文件空间，文件有发布者，内容名，文件URL）

  > 添加一个file表格，file(c_id,p_id,f_id,u_id,description,file_URL)   (李)

- 评分规则数据（每个project有一个评分规则数据，包括每个模块占比）

  > 添加一个评分制度表格，管理谁能评谁，score_system(c_id,p_id,system_id,description,percentage)
  >
  > 添加一个评分细则表格，管理评分表格中的细则，score_rule(c_id,p_id,r_id,description,point)
  >
  > 添加一个评分表格，score(rater_id,rated_id,c_id,p_id,r_id,point)

## 按页面分类的功能、UI设计

> 个人建议设置一个侧边栏或者导航栏，可以快速导向登录，注册，个人信息等界面，没有权限的用户不应当出现该页面的标签。

### 登录页面

1. 学生和教师以及管理员的登录功能，对于基本的输入正确性检测（是否有输入，正确性校验，**密码不应当明文传输**）
   
    > 是不是应该有管理员的登录呢？
    >
    > **不认为不同用户的登录页面不同，简化设计，使用同样页面，但是用路由的权限控制可以到达的页面，即对不同用户展示不同页面的入口，<u>同时限制URL访问越权的页面</u>**

2. ~~应当设置有切换身份的按钮~~

    > 是否允许一个账户具有多个身份的情况，如果允许就应当有切换身份的按钮，不允许则可以不需要。
    >
    > **不认为应当允许账户可以有多重身份，不利于实现**

3. 登录成功后跳转应当去往个人信息管理界面
   
    > 可以再考虑，不同用户应当去往不同页面？
    >
    > 学生 + 教师：课程页面
    >
    > 管理员：用户管理页面

4. 登录页面要有通向注册页面的路由

### 注册页面

1. 学生的注册功能，对于基本的输入正确性检测
   
   - 学号，必须，合法性（长度是否满足、只能输入数字）、重复性校验（是否和数据库中已经有的用户重复）
   - 姓名，必须，合法性（别过长，可以限定不要有特殊字符）
   - 性别，单选框（男、女、不愿透露）
   - 密码，必须，合法性（数字、字母、特殊字符（_、*）组合，八位及以上）
   - 确认密码，必须，合法性（和密码输入一致）
   - 头像可以不用这个时候上传，可以直接给个默认的，到后面想完善的再完善好了
   - 个人简介也是，后面再补充，这样比较友好，否则注册过程太冗长
   
2. 注册成功后有两种方案，一种是直接默认登录成功，跳转到个人信息界面，另一种是需要再次登录，跳转到登录界面

   > 我觉得看具体实现的时候可以自由选择哪种方式，需要跳往的页面与登录后跳转的页面一致即可

### 个人信息管理、展示页面

1. 对个人信息的展示，不同身份的用户展示的形式应该是不同的

    > 简单来看，教师和学生的个人信息展示应该是一样的，包括：
    >
    > - 头像
    > - 姓名
    > - 学工号
    > - 性别
    > - 个人简介
    > - 我修/教的课（可以选择仅自己可见，功能上比较人性化，但是管理员应该啥都能看到）
    >
    > 管理员的个人信息展示：看管理员表怎么设计，如果最后决定三表合一，展示内容可以和学生、教师相同，只是少了我修/教的课

    > 在展示状态不能进行修改，如果想修改应当点击修改按钮，将表格变成表单进行操作。
    >
    > 这个应该有特定组件可以实现。

2. 对个人信息的修改

    - 学工号不允许修改
    - 可以解锁table变成input框以便修改数据，同时出现提交和取消两个按钮，点击提交进行校验，而后修改
    - 修改密码需要在修改状态下显示一个特别的按键，可以有单独的弹窗，需要输入老密码、新密码、确认密码，需要校验

    > ~~对于唯一标识该用户的信息，如学号，教师工号等不允许进行修改~~

    > ~~这一部分感觉可以利用表单来完成，先读取数据库得到个人信息预写在表单中，用户修改后点击提交完成修改~~

3. 对个人信息的删除

    > 删除功能应当是部分受限的，也就是不是所有信息都能删除，比如姓名，学号等。
    >
    > 我不太明白这里的删除功能其实，我认为比如个人简介全删除是可以的，头像恢复默认也可以的，性别选择不愿透露也是可以的，其它好像没得好删除的。换言之，这个功能可能是虚功能，实现了修改也就实现了删除。

4. 上传头像功能

    - 头像可以有单独的上传新头像按键，也可以有恢复默认头像按键

      > 可以选择配合个人信息修改，点击解锁修改了之后才显示这两个按键。

    > ~~上传头像应当是与修改个人信息类似的，在修改状态下，可以通过点击头像附近的一个按钮上传图片作为头像。~~

### 课程管理页面

1. 课程为一个个card排列，展示内容为课程名称、课程简介、教师、学分、学时、以某种形式展示课程是否已经发布（例如有一个蓝色的标签的是已发布，红色标签的是未发布）

    - 对教师显示该教师开设的课程（只有该课程创设的教师具有查看权限）
      - 未发布课程有修改和发布按键，修改实现可以参考个人信息修改
      - 已发布课程有禁用的修改按键和可用的删除按键（后台需要cascade删除所有相关内容，是否可以数据库外键约束实现）
      - 要有添加新课程的按键，默认填充教师为本人
    - 对学生显示选修的课程，有退课按键，退课最好提示确认
    - 对管理员显示所有课程

    > 设想，所有人都能看到所有课程，只是权限不同是否更好：
    >
    > 1. 教师看到的分为`我教的课`、`其它课程`
    >
    >    - 我教的课分为未发布和已发布，各自有两个按键
    >
    >    - 其它课程有禁用的修改和删除按键
    >    - 未发布课程不可见
    >
    > 2. 学生看到的分为`我修的课`、`其它课程`
    >
    >    - 我修的课显示退出按键
    >    - 其它课程显示加入按键，不能进入其它课程的项目管理页面
    >    - 未发布课程不可见
    >
    > 3. 管理员所有课程，包括未发布，都能看，权限再考虑

2. 可以通过点击具体课程名称跳转到具体课程的项目管理界面，换言之，课程名称为一个链接

    > ~~显示课程时应当只显示其课程名字，简介以及导向链接~~

3. ~~未发布状态下，老师可以增删课程；发布之后，不允许对课程进行修改~~ 

    > ~~未发布状态下，学生无法看见本课程。~~

4. ~~学生可以查看自己选择的课程~~

    > ~~学生应当可以允许删除自己选择的课程吧（只是在列表中删除，也就代表着退课？）~~

### 项目管理页面（下辖多个页面）

#### 项目展示页面

1. 展示某课程所有项目（学生可以加入，后查看详情；老师可以查看、添加、删除项目）

    > 这个可以用项目卡片的形式展示，给不同用户提供不同按钮。可以有快捷按钮直接到达项目讨论版、文件管理空间。如果点击查看详情则是进入项目详情页，展示所有任务。

#### 项目详情页面

1. 进入项目详情后展示所有任务（老师、组长可以添加任务、分配任务、查看任务完成情况，督促学生尽快完成`是否需要站内信功能？`，`是否可以删除任务？`；学生可以被高亮自己被分配的任务、标记完成任务）、项目包含成员、讨论版、文件管理空间（上传、下载、删除）

    > 项目详情页主体我觉得可以做成switch的形式，在header上保留一个开关，让用户选择以卡片形式查看还是以甘特图形式查看所有任务，但是不论以哪种形式，需要展示的基本内容是相同的（开始日期、截至日期、重要程度、负责人等，以及被分配的学生可以勾选表示完成了），只是甘特图比较炫，开始日期、截至日期、重要程度这些都直接可视化了。
    >
    > 详情页的header需要包含去往讨论版的链接，去往文件管理空间的链接，点击一下可以显示项目所有成员信息和组长的按钮（`显示形式还没想好`），以及上段所述的switch开关。
    >
    > 督促人实现？

#### 项目讨论版页面

1. 按最近回复时间从近到远显示每个帖子，每个帖子可以展示最新的两条回复（简单起见，也可以不展示）
   - 帖子包含主题、发起人、内容、时间
   - 帖子有回复按钮，点击可以展示出一个文本框进行回复
   - 发起人能够删除自己的帖子
2. 点击一个按键可以展开某个帖子，按照从远到近的时间查看所有回复
   - 回复包含回复人、内容、时间
   - 回复要能被回复，简单起见，可以点击回复以后直接在弹出的文本框里添加“回复某某：”为开头
   - 回复人能删除自己的回复

#### 项目文件管理空间页面

1. 有上传按键，点击应当弹出对话框，填充文件名（文件描述）、上传文件
2. 文件一行行展示，有文件名（文件描述）、上传人、下载按钮
3. 上传人和老师和管理员可以删除文件

### 评分页面

> 评分标准应当在教师课程建立时确定。

1. 教师可以从下拉框选择自己教的课程、选择课程中的项目，对其中参与的学生进行评分。
   
   - 展示一个表格，每一行为一个学生，每一列为参与评分的模块，包括：
     - 任务完成数
     - 讨论版发言数
     - 教师加分（输入）
     - 总分（生成）
     
     > 各个模块分数到底怎么算？需要细致讨论
     
   - 需要一个地方定义各模块分数在总分中占比，总分根据该规则和学生具体数据自动生成
   
   - Better：表格应当能按照每列分别排序，应该有组件能实现该功能
   
2. 学生可以从下拉框中选择自己学的课程、选择课程中的项目，查看

   - 该项目中每个模块的分数占比，可以在表头中、该模块名边上括号标注（占XX%）
   - 自己在该项目中的得分，包括：
     - 任务完成数得分
     - 讨论版发言数得分
     - 教师加分
     - 总分

3. 学生可以和同学间进行互评。互评应当由教师指派互评作业对象，并且应当保证匿名。

   > 互评功能还可以再斟酌，毕竟这里没有实际提交的作业，只有完成项目任务，是否必须指名道姓才能完成互评

### 用户管理页面

1. 管理员可以看到这个页面
2. 显示所有用户列表，包括
   - id
   - 学工号
   - 姓名
   - 用户身份
   - 删除用户的按钮（删除需要cascade删除所有相关信息，或者讨论版上的信息可以set null，前端就显示已被删除的用户的发言）
3. 可以添加用户，填充
   - 学工号
   - 姓名
   - 性别（三选一）
   - 用户身份（三选一）
   - 密码
   - 确认密码

## 按页面分类的接口设计（请求URL、输入、输出）

